(function(a){Timeline={};if(Array.prototype.forEach===undefined){Array.prototype.forEach=function(e,d){for(var c=0,b=this.length;c<b;++c){e.call(d,this[c],c,this)}}}if(Object.create===undefined){Object.create=function(e,c){var b;if(typeof(e)!=="object"&&e!==null){throw new TypeError()}function d(){}d.prototype=e;b=new d();if(typeof(c)==="object"){for(var f in c){if(c.hasOwnProperty((f))){b[f]=c[f]}}}return b}}if(Object.getPrototypeOf===undefined){if(typeof"test".__proto__==="object"){Object.getPrototypeOf=function(b){return b.__proto__}}else{Object.getPrototypeOf=function(b){return b.constructor.prototype}}}Timeline.Util={};Timeline.Util.inherits=function(b,c){b.super_=c;b.prototype=Object.create(c.prototype)};Timeline.View=function(){this._element=a('<div class="'+this._getClassName()+'"></div>');this._element.appendTo("body").hide();this._element.data("view",this)};Timeline.View.prototype.getElement=function(){return this._element};Timeline.View.prototype._build=function(){};Timeline.View.prototype._postShow=function(){};Timeline.View.prototype.render=function(){this._build();this._element.show();this._postShow();return this._element};Timeline.View.prototype.isContainsY=function(d){var b=this._element.offset().top;var c=b+this._element.height();return b<=d&&d<=c};Timeline.EventView=function(e,d){var c=this;Timeline.EventView.super_.call(c);c._timeSpan=e;c._lineView=null;c._element.css("position","relative");c._element.addClass(d);c._startMinView=null;c._endMinView=null;var b=null;c._element.draggable({helper:"clone",create:function(f,g){c._element.draggable("option","revertDuration",150)},start:function(f,g){b=c.getLineView();g.helper.width(c._element.width());c._element.draggable("option","revert",false)}})};Timeline.Util.inherits(Timeline.EventView,Timeline.View);Timeline.EventView.CLASS_ELEM="tlEventView";Timeline.EventView.create=function(d,b,c){return new Timeline.EventView(Timeline.TimeSpan.create(d,b),c)};Timeline.EventView.prototype._getClassName=function(){return Timeline.EventView.CLASS_ELEM};Timeline.EventView.prototype.getTimeSpan=function(){return this._timeSpan};Timeline.EventView.prototype.setTimeSpan=function(b){this._timeSpan=b;return this};Timeline.EventView.prototype.setLineView=function(b){this._lineView=b;return this};Timeline.EventView.prototype.getLineView=function(b){return this._lineView};Timeline.EventView.prototype.setStartMinView=function(b){this._startMinView=b;return this};Timeline.EventView.prototype.setEndMinView=function(b){this._endMinView=b;return this};Timeline.EventView.prototype._build=function(){this._lineView.getLineElement().append(this._element)};Timeline.EventView.prototype.updateDisplay=function(){var d=this;var c=d._startMinView.getTopPosition(d._timeSpan.getStartTime().getMin());var b=d._endMinView.getTopPosition(d._timeSpan.getEndTime().getMin());var e=d._element.offset();e.top=c;d._element.offset(e);d._element.height(b-c-1)};Timeline.EventView.prototype._postShow=function(){this.updateDisplay()};Timeline.HourView=function(c,b){Timeline.HourView.super_.call(this);this._hour=b;this._lineView=c;this._minViews=[]};Timeline.Util.inherits(Timeline.HourView,Timeline.View);Timeline.HourView.CLASS_ELEM="tlHourView";Timeline.HourView.prototype._getClassName=function(){return Timeline.HourView.CLASS_ELEM};Timeline.HourView.prototype.getHour=function(){return this._hour};Timeline.HourView.prototype.getDisplayHour=function(){return this._hour<24?this._hour:this._hour-24};Timeline.HourView.prototype.getMinView=function(c){var b;this._minViews.forEach(function(d){if(d.contains(c)){b=d}});return b};Timeline.HourView.prototype.addHeightPerMin=function(b){this._minViews.forEach(function(c){c.addHeightPerMin(b)});return this};Timeline.HourView.prototype.setHeightPerMin=function(b){this._minViews.forEach(function(c){c.setHeightPerMin(b)});return this};Timeline.HourView.prototype.getMinViewUnderY=function(c){var b=null;a.each(this._minViews,function(){b=this;if(b.isContainsY(c)){return false}});return b};Timeline.HourView.prototype.getLineView=function(){return this._lineView};Timeline.HourView.prototype._build=function(){var e=15;var d=60/e;for(var c=0;c<d;c++){var b=new Timeline.MinView(this,c*e,e);this._minViews.push(b);this._element.append(b.render())}this._element.addClass("_"+this._hour)};Timeline.LineView=function(b){Timeline.LineView.super_.call(this);this._timeSpan=b;this._hourViews=[];this._lineElement=null;this._hoursWrapper=null;this._rulerElement=null;this._rulerView=null;this._lineWidth=60};Timeline.Util.inherits(Timeline.LineView,Timeline.View);Timeline.LineView.CLASS_ELEM="tlLineView";Timeline.LineView.prototype._getClassName=function(){return Timeline.LineView.CLASS_ELEM};Timeline.LineView.prototype.setRulerView=function(b){this._rulerView=b;this._rulerView.setLineView(this);this._rulerView.render();this._updateDisplay()};Timeline.LineView.prototype.forEachHourView=function(b){this._hourViews.forEach(function(c){b(c)})};Timeline.LineView.prototype.getLineElement=function(){return this._lineElement};Timeline.LineView.prototype._build=function(){var b=this;b._lineElement=a('<div class="tlTimeline" />').appendTo(b._element);b._hoursWrapper=a('<div class="tlHours" />').appendTo(b._lineElement);b._hoursWrapper.droppable({accept:".tlEventView",drop:function(c,j){var h=b._hoursWrapper.closest(".tlLineView").data("view");var d=j.draggable.data("view");var i=j.helper.offset().top;var f=h.getTimeUnderY(i);if(f===null){j.draggable.draggable("option","revert",true);return false}var g=d.getTimeSpan();var k=g.shiftStartTime(f);d.setTimeSpan(k);if(!h.isAvailableEventView(d)){d.setTimeSpan(g);j.draggable.draggable("option","revert",true);return false}var e=d.getLineView();h.addEventView(d);e.eachEventView(function(m,l){l.updateDisplay()})}});b._timeSpan.forEachHour(function(c){var d=new Timeline.HourView(b,c);b._hoursWrapper.append(d.render());b._hourViews.push(d)})};Timeline.LineView.prototype.getTimeUnderY=function(c){var b=this.getHourViewUnderY(c);if(b===null){return null}return b.getMinViewUnderY(c).getTimeUnderY(c)};Timeline.LineView.prototype.isAvailableEventView=function(c){var d=c.getTimeSpan();if(!this._timeSpan.isContainsTimeSpan(d)){return false}var b=true;this.eachEventView(function(f,e){if(c!==e){if(e.getTimeSpan().isOverlapsTimeSpan(d)){b=false;return false}}});return b};Timeline.LineView.prototype.getHourViewUnderY=function(d){var b=this;var c=null;a.each(b._hourViews,function(){if(this.isContainsY(d)){c=this;return false}});return c};Timeline.LineView.prototype._postShow=function(){this._updateDisplay()};Timeline.LineView.prototype.addEventView=function(b){b.setLineView(this);var c=b.getTimeSpan();b.setStartMinView(this._getMinView(c.getStartTime()));b.setEndMinView(this._getMinView(c.getEndTime()));b.render();return this};Timeline.LineView.prototype._getMinView=function(c){var b;this._hourViews.forEach(function(d){if(d.getHour()===c.getHour()){b=d.getMinView(c.getMin())}});return b};Timeline.LineView.prototype.addLineWidth=function(b){this._lineWidth+=b;this._updateDisplay();return this};Timeline.LineView.prototype.setLineWidth=function(b){this._lineWidth=b;this._updateDisplay();return this};Timeline.LineView.prototype.addHeightPerMin=function(b){this._hourViews.forEach(function(c){c.addHeightPerMin(b)});this._updateRulerDisplay();this._updateEventsDisplay();this._updateDisplay();return this};Timeline.LineView.prototype.setHeightPerMin=function(b){this._hourViews.forEach(function(c){c.setHeightPerMin(b)});this._updateRulerDisplay();this._updateEventsDisplay();this._updateDisplay();return this};Timeline.LineView.prototype._updateDisplay=function(){var b=this;b._lineElement.width(b._lineWidth);if(b._rulerView){b._element.width(b._lineWidth+Timeline.RulerView.DEFAULT_WIDTH)}else{b._element.width(b._lineWidth)}setTimeout(function(){var c=b._hoursWrapper.height();b._lineElement.css({height:c,overflow:"hidden"})},0)};Timeline.LineView.prototype.eachEventView=function(b){this._element.find(".tlEventView:not(.ui-draggable-dragging)").each(function(d){var c=a(this).data("view");if(b.call(c,d,c)===false){return}})};Timeline.LineView.prototype._updateEventsDisplay=function(){this.eachEventView(function(c,b){b.updateDisplay()})};Timeline.LineView.prototype._updateRulerDisplay=function(){if(this._rulerView===null){return}this._rulerView.updateDisplay()};Timeline.MinView=function(c,b,d){Timeline.MinView.super_.call(this);this._hourView=c;this._min=b;this._minUnit=d;this._heightPerMin=1};Timeline.Util.inherits(Timeline.MinView,Timeline.View);Timeline.MinView.CLASS_ELEM="tlMinView";Timeline.MinView.prototype._getClassName=function(){return Timeline.MinView.CLASS_ELEM};Timeline.MinView.prototype.contains=function(d){var c=this._min===0?0:this._min;var b=this._min+this._minUnit-1;return c<=d&&d<=b};Timeline.MinView.prototype.getHourView=function(){return this._hourView};Timeline.MinView.prototype.getTopPosition=function(b){var d=this._element.offset();var c=(b%this._minUnit)/this._minUnit;return d.top+(this._element.outerHeight()*c)-1};Timeline.MinView.prototype.getTimeUnderY=function(d){var c=(d-this._element.offset().top)/this._minUnit;var b=this._min+(this._minUnit*c);return new Timeline.Time(this._hourView.getHour(),b)};Timeline.MinView.prototype.addHeightPerMin=function(b){var c=this._heightPerMin;c+=b;if(c<0.1){c=0.1}this.setHeightPerMin(c);return this};Timeline.MinView.prototype.setHeightPerMin=function(b){if(this._heightPerMin==b){return}this._heightPerMin=b;this._updateDisplay();return this};Timeline.MinView.prototype._updateDisplay=function(){this._element.height(this._heightPerMin*this._minUnit)};Timeline.MinView.prototype._build=function(){this._element.addClass("_"+(this._min+this._minUnit));this._updateDisplay()};Timeline.RulerView=function(){Timeline.RulerView.super_.call(this);this._lineView=null};Timeline.Util.inherits(Timeline.RulerView,Timeline.View);Timeline.RulerView.CLASS_ELEM="tlRulerView";Timeline.RulerView.DEFAULT_WIDTH=50;Timeline.RulerView.prototype._getClassName=function(){return Timeline.RulerView.CLASS_ELEM};Timeline.RulerView.prototype._build=function(){var b=this;b._lineView.getElement().prepend(b._element);b._element.width(Timeline.RulerView.DEFAULT_WIDTH);b._lineView.forEachHourView(function(d){var c=a('<div class="hour">'+d.getDisplayHour()+":00</div>");b._element.append(c);c.data("hourView",d);c.height(d.getElement().outerHeight())})};Timeline.RulerView.prototype._postShow=function(){};Timeline.RulerView.prototype.updateDisplay=function(){this._element.children().each(function(){var b=a(this);var c=b.data("hourView");setTimeout(function(){b.height(c.getElement().outerHeight())},0)})};Timeline.RulerView.prototype.setLineView=function(b){b.getElement().addClass("hasRuler");this._lineView=b};Timeline.TemplateView=function(){Timeline.TemplateView.super_.call(this)};Timeline.Util.inherits(Timeline.TemplateView,Timeline.View);Timeline.TemplateView.CLASS_ELEM="tlTemplateView";Timeline.TemplateView.prototype._getClassName=function(){return Timeline.TemplateView.CLASS_ELEM};Timeline.TemplateView.prototype._build=function(){};Timeline.TemplateView.prototype._postShow=function(){};Timeline.Time=function(b,c){this._hour=b===undefined?0:parseInt(b,10);this._min=c===undefined?0:parseInt(c,10)};Timeline.Time.prototype.getHour=function(){return this._hour};Timeline.Time.prototype.getMin=function(){return this._min};Timeline.Time.prototype.addMin=function(c){var e=this.getHour();var d=this.getMin();d+=c;if(d>59){var b=Math.floor(d/60);d=d%60;e+=b}return new Timeline.Time(e,d)};Timeline.Time.prototype.equals=function(b){return this.getHour()===b.getHour()&&this.getMin()===b.getMin()};Timeline.Time.prototype.compare=function(b){if(this.getHour()>b.getHour()){return 1}else{if(this.getHour()<b.getHour()){return -1}else{if(this.getMin()>b.getMin()){return 1}else{if(this.getMin()<b.getMin()){return -1}}}}return 0};Timeline.Time.prototype.getDistance=function(d){var c=d.getHour();var b=c-this._hour;return(b*60)+(d.getMin()-this._min)};Timeline.Time.prototype.toString=function(){return this._hour+":"+(this._min<10?"0"+this._min:this._min)};Timeline.TimeSpan=function(c,b){if(c.compare(b)>0){throw Error("The endTime is earlier than the startTime.")}this._startTime=c;this._endTime=b};Timeline.TimeSpan.create=function(c,b){return new Timeline.TimeSpan(new Timeline.Time(c[0],c[1]),new Timeline.Time(b[0],b[1]))};Timeline.TimeSpan.prototype.getDistance=function(){return this._startTime.getDistance(this._endTime)};Timeline.TimeSpan.prototype.getStartTime=function(){return this._startTime};Timeline.TimeSpan.prototype.getEndTime=function(){return this._endTime};Timeline.TimeSpan.prototype.shiftStartTime=function(b){return new Timeline.TimeSpan(b,b.addMin(this.getDistance()))};Timeline.TimeSpan.prototype.isOverlapsTimeSpan=function(b){return(b.getStartTime().compare(this._startTime)>=0&&b.getStartTime().compare(this._endTime)<=0)||(b.getEndTime().compare(this._startTime)>=0&&b.getEndTime().compare(this._endTime)<=0)};Timeline.TimeSpan.prototype.isContainsTimeSpan=function(b){return this._startTime.compare(b.getStartTime())<=0&&this._endTime.compare(b.getEndTime())>=0};Timeline.TimeSpan.prototype.forEachHour=function(d){var c=this.getStartTime().getHour();var b=this.getEndTime().getHour();while(true){d(c);if(c===b){break}c+=1}};Timeline.TimeSpan.prototype.toString=function(){return this._startTime+"~"+this._endTime};
/*! jQuery UI - v1.10.2 - 2013-04-07
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(c,g){var b=0,f=/^ui-id-\d+$/;c.ui=c.ui||{};c.extend(c.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});c.fn.extend({focus:(function(h){return function(i,j){return typeof i==="number"?this.each(function(){var k=this;setTimeout(function(){c(k).focus();if(j){j.call(k)}},i)}):h.apply(this,arguments)}})(c.fn.focus),scrollParent:function(){var h;if((c.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){h=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(c.css(this,"position"))&&(/(auto|scroll)/).test(c.css(this,"overflow")+c.css(this,"overflow-y")+c.css(this,"overflow-x"))}).eq(0)}else{h=this.parents().filter(function(){return(/(auto|scroll)/).test(c.css(this,"overflow")+c.css(this,"overflow-y")+c.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!h.length?c(document):h},zIndex:function(k){if(k!==g){return this.css("zIndex",k)}if(this.length){var i=c(this[0]),h,j;while(i.length&&i[0]!==document){h=i.css("position");if(h==="absolute"||h==="relative"||h==="fixed"){j=parseInt(i.css("zIndex"),10);if(!isNaN(j)&&j!==0){return j}}i=i.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++b)}})},removeUniqueId:function(){return this.each(function(){if(f.test(this.id)){c(this).removeAttr("id")}})}});function e(j,h){var l,k,i,m=j.nodeName.toLowerCase();if("area"===m){l=j.parentNode;k=l.name;if(!j.href||!k||l.nodeName.toLowerCase()!=="map"){return false}i=c("img[usemap=#"+k+"]")[0];return !!i&&d(i)}return(/input|select|textarea|button|object/.test(m)?!j.disabled:"a"===m?j.href||h:h)&&d(j)}function d(h){return c.expr.filters.visible(h)&&!c(h).parents().addBack().filter(function(){return c.css(this,"visibility")==="hidden"}).length}c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(h){return function(i){return !!c.data(i,h)}}):function(k,j,h){return !!c.data(k,h[3])},focusable:function(h){return e(h,!isNaN(c.attr(h,"tabindex")))},tabbable:function(j){var h=c.attr(j,"tabindex"),i=isNaN(h);return(i||h>=0)&&e(j,!i)}});if(!c("<a>").outerWidth(1).jquery){c.each(["Width","Height"],function(k,h){var j=h==="Width"?["Left","Right"]:["Top","Bottom"],l=h.toLowerCase(),n={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};function m(p,o,i,q){c.each(j,function(){o-=parseFloat(c.css(p,"padding"+this))||0;if(i){o-=parseFloat(c.css(p,"border"+this+"Width"))||0}if(q){o-=parseFloat(c.css(p,"margin"+this))||0}});return o}c.fn["inner"+h]=function(i){if(i===g){return n["inner"+h].call(this)}return this.each(function(){c(this).css(l,m(this,i)+"px")})};c.fn["outer"+h]=function(i,o){if(typeof i!=="number"){return n["outer"+h].call(this,i)}return this.each(function(){c(this).css(l,m(this,i,true,o)+"px")})}})}if(!c.fn.addBack){c.fn.addBack=function(h){return this.add(h==null?this.prevObject:this.prevObject.filter(h))}}if(c("<a>").data("a-b","a").removeData("a-b").data("a-b")){c.fn.removeData=(function(h){return function(i){if(arguments.length){return h.call(this,c.camelCase(i))}else{return h.call(this)}}})(c.fn.removeData)}c.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());c.support.selectstart="onselectstart" in document.createElement("div");c.fn.extend({disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(h){h.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.extend(c.ui,{plugin:{add:function(j,k,m){var h,l=c.ui[j].prototype;for(h in m){l.plugins[h]=l.plugins[h]||[];l.plugins[h].push([k,m[h]])}},call:function(h,k,j){var l,m=h.plugins[k];if(!m||!h.element[0].parentNode||h.element[0].parentNode.nodeType===11){return}for(l=0;l<m.length;l++){if(h.options[m[l][0]]){m[l][1].apply(h.element,j)}}}},hasScroll:function(k,i){if(c(k).css("overflow")==="hidden"){return false}var h=(i&&i==="left")?"scrollLeft":"scrollTop",j=false;if(k[h]>0){return true}k[h]=1;j=(k[h]>0);k[h]=0;return j}})})(jQuery);(function(c,f){var b=0,e=Array.prototype.slice,d=c.cleanData;c.cleanData=function(g){for(var h=0,j;(j=g[h])!=null;h++){try{c(j).triggerHandler("remove")}catch(k){}}d(g)};c.widget=function(g,h,o){var l,m,j,n,i={},k=g.split(".")[0];g=g.split(".")[1];l=k+"-"+g;if(!o){o=h;h=c.Widget}c.expr[":"][l.toLowerCase()]=function(p){return !!c.data(p,l)};c[k]=c[k]||{};m=c[k][g];j=c[k][g]=function(p,q){if(!this._createWidget){return new j(p,q)}if(arguments.length){this._createWidget(p,q)}};c.extend(j,m,{version:o.version,_proto:c.extend({},o),_childConstructors:[]});n=new h();n.options=c.widget.extend({},n.options);c.each(o,function(q,p){if(!c.isFunction(p)){i[q]=p;return}i[q]=(function(){var r=function(){return h.prototype[q].apply(this,arguments)},s=function(t){return h.prototype[q].apply(this,t)};return function(){var v=this._super,t=this._superApply,u;this._super=r;this._superApply=s;u=p.apply(this,arguments);this._super=v;this._superApply=t;return u}})()});j.prototype=c.widget.extend(n,{widgetEventPrefix:m?n.widgetEventPrefix:g},i,{constructor:j,namespace:k,widgetName:g,widgetFullName:l});if(m){c.each(m._childConstructors,function(q,r){var p=r.prototype;c.widget(p.namespace+"."+p.widgetName,j,r._proto)});delete m._childConstructors}else{h._childConstructors.push(j)}c.widget.bridge(g,j)};c.widget.extend=function(l){var h=e.call(arguments,1),k=0,g=h.length,i,j;for(;k<g;k++){for(i in h[k]){j=h[k][i];if(h[k].hasOwnProperty(i)&&j!==f){if(c.isPlainObject(j)){l[i]=c.isPlainObject(l[i])?c.widget.extend({},l[i],j):c.widget.extend({},j)}else{l[i]=j}}}}return l};c.widget.bridge=function(h,g){var i=g.prototype.widgetFullName||h;c.fn[h]=function(l){var j=typeof l==="string",k=e.call(arguments,1),m=this;l=!j&&k.length?c.widget.extend.apply(null,[l].concat(k)):l;if(j){this.each(function(){var o,n=c.data(this,i);if(!n){return c.error("cannot call methods on "+h+" prior to initialization; attempted to call method '"+l+"'")}if(!c.isFunction(n[l])||l.charAt(0)==="_"){return c.error("no such method '"+l+"' for "+h+" widget instance")}o=n[l].apply(n,k);if(o!==n&&o!==f){m=o&&o.jquery?m.pushStack(o.get()):o;return false}})}else{this.each(function(){var n=c.data(this,i);if(n){n.option(l||{})._init()}else{c.data(this,i,new g(l,this))}})}return m}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(g,h){h=c(h||this.defaultElement||this)[0];this.element=c(h);this.uuid=b++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=c.widget.extend({},this.options,this._getCreateOptions(),g);this.bindings=c();this.hoverable=c();this.focusable=c();if(h!==this){c.data(h,this.widgetFullName,this);this._on(true,this.element,{remove:function(i){if(i.target===h){this.destroy()}}});this.document=c(h.style?h.ownerDocument:h.document||h);this.window=c(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(k,l){var g=k,m,j,h;if(arguments.length===0){return c.widget.extend({},this.options)}if(typeof k==="string"){g={};m=k.split(".");k=m.shift();if(m.length){j=g[k]=c.widget.extend({},this.options[k]);for(h=0;h<m.length-1;h++){j[m[h]]=j[m[h]]||{};j=j[m[h]]}k=m.pop();if(l===f){return j[k]===f?null:j[k]}j[k]=l}else{if(l===f){return this.options[k]===f?null:this.options[k]}g[k]=l}}this._setOptions(g);return this},_setOptions:function(g){var h;for(h in g){this._setOption(h,g[h])}return this},_setOption:function(g,h){this.options[g]=h;if(g==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!h).attr("aria-disabled",h);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(j,i,h){var k,g=this;if(typeof j!=="boolean"){h=i;i=j;j=false}if(!h){h=i;i=this.element;k=this.widget()}else{i=k=c(i);this.bindings=this.bindings.add(i)}c.each(h,function(q,p){function n(){if(!j&&(g.options.disabled===true||c(this).hasClass("ui-state-disabled"))){return}return(typeof p==="string"?g[p]:p).apply(g,arguments)}if(typeof p!=="string"){n.guid=p.guid=p.guid||n.guid||c.guid++}var o=q.match(/^(\w+)\s*(.*)$/),m=o[1]+g.eventNamespace,l=o[2];if(l){k.delegate(l,m,n)}else{i.bind(m,n)}})},_off:function(h,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;h.unbind(g).undelegate(g)},_delay:function(j,i){function h(){return(typeof j==="string"?g[j]:j).apply(g,arguments)}var g=this;return setTimeout(h,i||0)},_hoverable:function(g){this.hoverable=this.hoverable.add(g);this._on(g,{mouseenter:function(h){c(h.currentTarget).addClass("ui-state-hover")},mouseleave:function(h){c(h.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(g){this.focusable=this.focusable.add(g);this._on(g,{focusin:function(h){c(h.currentTarget).addClass("ui-state-focus")},focusout:function(h){c(h.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(g,h,i){var l,k,j=this.options[g];i=i||{};h=c.Event(h);h.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase();h.target=this.element[0];k=h.originalEvent;if(k){for(l in k){if(!(l in h)){h[l]=k[l]}}}this.element.trigger(h,i);return !(c.isFunction(j)&&j.apply(this.element[0],[h].concat(i))===false||h.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(h,g){c.Widget.prototype["_"+h]=function(k,j,m){if(typeof j==="string"){j={effect:j}}var l,i=!j?h:j===true||typeof j==="number"?g:j.effect||g;j=j||{};if(typeof j==="number"){j={duration:j}}l=!c.isEmptyObject(j);j.complete=m;if(j.delay){k.delay(j.delay)}if(l&&c.effects&&c.effects.effect[i]){k[h](j)}else{if(i!==h&&k[i]){k[i](j.duration,j.easing,m)}else{k.queue(function(n){c(this)[h]();if(m){m.call(k[0])}n()})}}}})})(jQuery);(function(c,d){var b=false;c(document).mouseup(function(){b=false});c.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(f){return e._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===c.data(f.target,e.widgetName+".preventClickEvent")){c.removeData(f.target,e.widgetName+".preventClickEvent");f.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(g){if(b){return}(this._mouseStarted&&this._mouseUp(g));this._mouseDownEvent=g;var f=this,h=(g.which===1),e=(typeof this.options.cancel==="string"&&g.target.nodeName?c(g.target).closest(this.options.cancel).length:false);if(!h||e||!this._mouseCapture(g)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)){this._mouseStarted=(this._mouseStart(g)!==false);if(!this._mouseStarted){g.preventDefault();return true}}if(true===c.data(g.target,this.widgetName+".preventClickEvent")){c.removeData(g.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(i){return f._mouseMove(i)};this._mouseUpDelegate=function(i){return f._mouseUp(i)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);g.preventDefault();b=true;return true},_mouseMove:function(e){if(c.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button){return this._mouseUp(e)}if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,e)!==false);(this._mouseStarted?this._mouseDrag(e):this._mouseUp(e))}return !this._mouseStarted},_mouseUp:function(e){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(e.target===this._mouseDownEvent.target){c.data(e.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(e)}return false},_mouseDistanceMet:function(e){return(Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(b,c){b.widget("ui.draggable",b.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}if(this.options.addClasses){this.element.addClass("ui-draggable")}if(this.options.disabled){this.element.addClass("ui-draggable-disabled")}this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(d){var e=this.options;if(this.helper||e.disabled||b(d.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(d);if(!this.handle){return false}b(e.iframeFix===true?"iframe":e.iframeFix).each(function(){b("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(b(this).offset()).appendTo("body")});return true},_mouseStart:function(d){var e=this.options;this.helper=this._createHelper(d);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(b.ui.ddmanager){b.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;(e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt));if(e.containment){this._setContainment()}if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();if(b.ui.ddmanager&&!e.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,d)}this._mouseDrag(d,true);if(b.ui.ddmanager){b.ui.ddmanager.dragStart(this,d)}return true},_mouseDrag:function(d,f){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!f){var e=this._uiHash();if(this._trigger("drag",d,e)===false){this._mouseUp({});return false}this.position=e.position}if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}if(b.ui.ddmanager){b.ui.ddmanager.drag(this,d)}return false},_mouseStop:function(f){var d,e=this,h=false,g=false;if(b.ui.ddmanager&&!this.options.dropBehaviour){g=b.ui.ddmanager.drop(this,f)}if(this.dropped){g=this.dropped;this.dropped=false}d=this.element[0];while(d&&(d=d.parentNode)){if(d===document){h=true}}if(!h&&this.options.helper==="original"){return false}if((this.options.revert==="invalid"&&!g)||(this.options.revert==="valid"&&g)||this.options.revert===true||(b.isFunction(this.options.revert)&&this.options.revert.call(this.element,g))){b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(e._trigger("stop",f)!==false){e._clear()}})}else{if(this._trigger("stop",f)!==false){this._clear()}}return false},_mouseUp:function(d){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(b.ui.ddmanager){b.ui.ddmanager.dragStop(this,d)}return b.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(d){return this.options.handle?!!b(d.target).closest(this.element.find(this.options.handle)).length:true},_createHelper:function(e){var f=this.options,d=b.isFunction(f.helper)?b(f.helper.apply(this.element[0],[e])):(f.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!d.parents("body").length){d.appendTo((f.appendTo==="parent"?this.element[0].parentNode:f.appendTo))}if(d[0]!==this.element[0]&&!(/(fixed|absolute)/).test(d.css("position"))){d.css("position","absolute")}return d},_adjustOffsetFromHelper:function(d){if(typeof d==="string"){d=d.split(" ")}if(b.isArray(d)){d={left:+d[0],top:+d[1]||0}}if("left" in d){this.offset.click.left=d.left+this.margins.left}if("right" in d){this.offset.click.left=this.helperProportions.width-d.right+this.margins.left}if("top" in d){this.offset.click.top=d.top+this.margins.top}if("bottom" in d){this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]===document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&b.ui.ie)){d={top:0,left:0}}return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var d=this.element.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,g,d,f=this.options;if(f.containment==="parent"){f.containment=this.helper[0].parentNode}if(f.containment==="document"||f.containment==="window"){this.containment=[f.containment==="document"?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,f.containment==="document"?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(f.containment==="document"?0:b(window).scrollLeft())+b(f.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(f.containment==="document"?0:b(window).scrollTop())+(b(f.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(f.containment)&&f.containment.constructor!==Array){g=b(f.containment);d=g[0];if(!d){return}e=(b(d).css("overflow")!=="hidden");this.containment=[(parseInt(b(d).css("borderLeftWidth"),10)||0)+(parseInt(b(d).css("paddingLeft"),10)||0),(parseInt(b(d).css("borderTopWidth"),10)||0)+(parseInt(b(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(b(d).css("borderRightWidth"),10)||0)-(parseInt(b(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(b(d).css("borderBottomWidth"),10)||0)-(parseInt(b(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=g}else{if(f.containment.constructor===Array){this.containment=f.containment}}},_convertPositionTo:function(g,i){if(!i){i=this.position}var f=g==="absolute"?1:-1,e=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(e[0].tagName);return{top:(i.top+this.offset.relative.top*f+this.offset.parent.top*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(h?0:e.scrollTop()))*f)),left:(i.left+this.offset.relative.left*f+this.offset.parent.left*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():h?0:e.scrollLeft())*f))}},_generatePosition:function(e){var d,k,l,g,f=this.options,m=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=(/(html|body)/i).test(m[0].tagName),i=e.pageX,h=e.pageY;if(this.originalPosition){if(this.containment){if(this.relative_container){k=this.relative_container.offset();d=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]}else{d=this.containment}if(e.pageX-this.offset.click.left<d[0]){i=d[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<d[1]){h=d[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>d[2]){i=d[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>d[3]){h=d[3]+this.offset.click.top}}if(f.grid){l=f.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY;h=d?((l-this.offset.click.top>=d[1]||l-this.offset.click.top>d[3])?l:((l-this.offset.click.top>=d[1])?l-f.grid[1]:l+f.grid[1])):l;g=f.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX;i=d?((g-this.offset.click.left>=d[0]||g-this.offset.click.left>d[2])?g:((g-this.offset.click.left>=d[0])?g-f.grid[0]:g+f.grid[0])):g}}return{top:(h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(j?0:m.scrollTop())))),left:(i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():j?0:m.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(d,e,f){f=f||this._uiHash();b.ui.plugin.call(this,d,[e,f]);if(d==="drag"){this.positionAbs=this._convertPositionTo("absolute")}return b.Widget.prototype._trigger.call(this,d,e,f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(e,g){var f=b(this).data("ui-draggable"),h=f.options,d=b.extend({},g,{item:f.element});f.sortables=[];b(h.connectToSortable).each(function(){var i=b.data(this,"ui-sortable");if(i&&!i.options.disabled){f.sortables.push({instance:i,shouldRevert:i.options.revert});i.refreshPositions();i._trigger("activate",e,d)}})},stop:function(e,g){var f=b(this).data("ui-draggable"),d=b.extend({},g,{item:f.element});b.each(f.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;f.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=this.shouldRevert}this.instance._mouseStop(e);this.instance.options.helper=this.instance.options._helper;if(f.options.helper==="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",e,d)}})},drag:function(e,g){var f=b(this).data("ui-draggable"),d=this;b.each(f.sortables,function(){var h=false,i=this;this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){h=true;b.each(f.sortables,function(){this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this!==i&&this.instance._intersectsWith(this.instance.containerCache)&&b.contains(i.instance.element[0],this.instance.element[0])){h=false}return h})}if(h){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=b(d).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return g.helper[0]};e.target=this.instance.currentItem[0];this.instance._mouseCapture(e,true);this.instance._mouseStart(e,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;f._trigger("toSortable",e);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}if(this.instance.currentItem){this.instance._mouseDrag(e)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",e,this.instance._uiHash(this.instance));this.instance._mouseStop(e,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}f._trigger("fromSortable",e);f.dropped=false}}})}});b.ui.plugin.add("draggable","cursor",{start:function(){var d=b("body"),e=b(this).data("ui-draggable").options;if(d.css("cursor")){e._cursor=d.css("cursor")}d.css("cursor",e.cursor)},stop:function(){var d=b(this).data("ui-draggable").options;if(d._cursor){b("body").css("cursor",d._cursor)}}});b.ui.plugin.add("draggable","opacity",{start:function(e,f){var d=b(f.helper),g=b(this).data("ui-draggable").options;if(d.css("opacity")){g._opacity=d.css("opacity")}d.css("opacity",g.opacity)},stop:function(d,e){var f=b(this).data("ui-draggable").options;if(f._opacity){b(e.helper).css("opacity",f._opacity)}}});b.ui.plugin.add("draggable","scroll",{start:function(){var d=b(this).data("ui-draggable");if(d.scrollParent[0]!==document&&d.scrollParent[0].tagName!=="HTML"){d.overflowOffset=d.scrollParent.offset()}},drag:function(f){var e=b(this).data("ui-draggable"),g=e.options,d=false;if(e.scrollParent[0]!==document&&e.scrollParent[0].tagName!=="HTML"){if(!g.axis||g.axis!=="x"){if((e.overflowOffset.top+e.scrollParent[0].offsetHeight)-f.pageY<g.scrollSensitivity){e.scrollParent[0].scrollTop=d=e.scrollParent[0].scrollTop+g.scrollSpeed}else{if(f.pageY-e.overflowOffset.top<g.scrollSensitivity){e.scrollParent[0].scrollTop=d=e.scrollParent[0].scrollTop-g.scrollSpeed}}}if(!g.axis||g.axis!=="y"){if((e.overflowOffset.left+e.scrollParent[0].offsetWidth)-f.pageX<g.scrollSensitivity){e.scrollParent[0].scrollLeft=d=e.scrollParent[0].scrollLeft+g.scrollSpeed}else{if(f.pageX-e.overflowOffset.left<g.scrollSensitivity){e.scrollParent[0].scrollLeft=d=e.scrollParent[0].scrollLeft-g.scrollSpeed}}}}else{if(!g.axis||g.axis!=="x"){if(f.pageY-b(document).scrollTop()<g.scrollSensitivity){d=b(document).scrollTop(b(document).scrollTop()-g.scrollSpeed)}else{if(b(window).height()-(f.pageY-b(document).scrollTop())<g.scrollSensitivity){d=b(document).scrollTop(b(document).scrollTop()+g.scrollSpeed)}}}if(!g.axis||g.axis!=="y"){if(f.pageX-b(document).scrollLeft()<g.scrollSensitivity){d=b(document).scrollLeft(b(document).scrollLeft()-g.scrollSpeed)}else{if(b(window).width()-(f.pageX-b(document).scrollLeft())<g.scrollSensitivity){d=b(document).scrollLeft(b(document).scrollLeft()+g.scrollSpeed)}}}}if(d!==false&&b.ui.ddmanager&&!g.dropBehaviour){b.ui.ddmanager.prepareOffsets(e,f)}}});b.ui.plugin.add("draggable","snap",{start:function(){var d=b(this).data("ui-draggable"),e=d.options;d.snapElements=[];b(e.snap.constructor!==String?(e.snap.items||":data(ui-draggable)"):e.snap).each(function(){var g=b(this),f=g.offset();if(this!==d.element[0]){d.snapElements.push({item:this,width:g.outerWidth(),height:g.outerHeight(),top:f.top,left:f.left})}})},drag:function(v,q){var e,A,k,m,u,p,n,B,w,j,h=b(this).data("ui-draggable"),s=h.options,z=s.snapTolerance,y=q.offset.left,x=y+h.helperProportions.width,g=q.offset.top,f=g+h.helperProportions.height;for(w=h.snapElements.length-1;w>=0;w--){u=h.snapElements[w].left;p=u+h.snapElements[w].width;n=h.snapElements[w].top;B=n+h.snapElements[w].height;if(!((u-z<y&&y<p+z&&n-z<g&&g<B+z)||(u-z<y&&y<p+z&&n-z<f&&f<B+z)||(u-z<x&&x<p+z&&n-z<g&&g<B+z)||(u-z<x&&x<p+z&&n-z<f&&f<B+z))){if(h.snapElements[w].snapping){(h.options.snap.release&&h.options.snap.release.call(h.element,v,b.extend(h._uiHash(),{snapItem:h.snapElements[w].item})))}h.snapElements[w].snapping=false;continue}if(s.snapMode!=="inner"){e=Math.abs(n-f)<=z;A=Math.abs(B-g)<=z;k=Math.abs(u-x)<=z;m=Math.abs(p-y)<=z;if(e){q.position.top=h._convertPositionTo("relative",{top:n-h.helperProportions.height,left:0}).top-h.margins.top}if(A){q.position.top=h._convertPositionTo("relative",{top:B,left:0}).top-h.margins.top}if(k){q.position.left=h._convertPositionTo("relative",{top:0,left:u-h.helperProportions.width}).left-h.margins.left}if(m){q.position.left=h._convertPositionTo("relative",{top:0,left:p}).left-h.margins.left}}j=(e||A||k||m);if(s.snapMode!=="outer"){e=Math.abs(n-g)<=z;A=Math.abs(B-f)<=z;k=Math.abs(u-y)<=z;m=Math.abs(p-x)<=z;if(e){q.position.top=h._convertPositionTo("relative",{top:n,left:0}).top-h.margins.top}if(A){q.position.top=h._convertPositionTo("relative",{top:B-h.helperProportions.height,left:0}).top-h.margins.top}if(k){q.position.left=h._convertPositionTo("relative",{top:0,left:u}).left-h.margins.left}if(m){q.position.left=h._convertPositionTo("relative",{top:0,left:p-h.helperProportions.width}).left-h.margins.left}}if(!h.snapElements[w].snapping&&(e||A||k||m||j)){(h.options.snap.snap&&h.options.snap.snap.call(h.element,v,b.extend(h._uiHash(),{snapItem:h.snapElements[w].item})))}h.snapElements[w].snapping=(e||A||k||m||j)}}});b.ui.plugin.add("draggable","stack",{start:function(){var d,f=this.data("ui-draggable").options,e=b.makeArray(b(f.stack)).sort(function(h,g){return(parseInt(b(h).css("zIndex"),10)||0)-(parseInt(b(g).css("zIndex"),10)||0)});if(!e.length){return}d=parseInt(b(e[0]).css("zIndex"),10)||0;b(e).each(function(g){b(this).css("zIndex",d+g)});this.css("zIndex",(d+e.length))}});b.ui.plugin.add("draggable","zIndex",{start:function(e,f){var d=b(f.helper),g=b(this).data("ui-draggable").options;if(d.css("zIndex")){g._zIndex=d.css("zIndex")}d.css("zIndex",g.zIndex)},stop:function(d,e){var f=b(this).data("ui-draggable").options;if(f._zIndex){b(e.helper).css("zIndex",f._zIndex)}}})})(jQuery);(function(c,d){function b(f,e,g){return(f>e)&&(f<(e+g))}c.widget("ui.droppable",{version:"1.10.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var f=this.options,e=f.accept;this.isover=false;this.isout=true;this.accept=c.isFunction(e)?e:function(g){return g.is(e)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};c.ui.ddmanager.droppables[f.scope]=c.ui.ddmanager.droppables[f.scope]||[];c.ui.ddmanager.droppables[f.scope].push(this);(f.addClasses&&this.element.addClass("ui-droppable"))},_destroy:function(){var f=0,e=c.ui.ddmanager.droppables[this.options.scope];for(;f<e.length;f++){if(e[f]===this){e.splice(f,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,f){if(e==="accept"){this.accept=c.isFunction(f)?f:function(g){return g.is(f)}}c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(f){var e=c.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}if(e){this._trigger("activate",f,this.ui(e))}},_deactivate:function(f){var e=c.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(e){this._trigger("deactivate",f,this.ui(e))}},_over:function(f){var e=c.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(e.currentItem||e.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",f,this.ui(e))}},_out:function(f){var e=c.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(e.currentItem||e.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",f,this.ui(e))}},_drop:function(f,g){var e=g||c.ui.ddmanager.current,h=false;if(!e||(e.currentItem||e.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=c.data(this,"ui-droppable");if(i.options.greedy&&!i.options.disabled&&i.options.scope===e.options.scope&&i.accept.call(i.element[0],(e.currentItem||e.element))&&c.ui.intersect(e,c.extend(i,{offset:i.element.offset()}),i.options.tolerance)){h=true;return false}});if(h){return false}if(this.accept.call(this.element[0],(e.currentItem||e.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",f,this.ui(e));return this.element}return false},ui:function(e){return{draggable:(e.currentItem||e.element),helper:e.helper,position:e.position,offset:e.positionAbs}}});c.ui.intersect=function(s,k,p){if(!k.offset){return false}var i,j,g=(s.positionAbs||s.position.absolute).left,f=g+s.helperProportions.width,o=(s.positionAbs||s.position.absolute).top,n=o+s.helperProportions.height,h=k.offset.left,e=h+k.proportions.width,q=k.offset.top,m=q+k.proportions.height;switch(p){case"fit":return(h<=g&&f<=e&&q<=o&&n<=m);case"intersect":return(h<g+(s.helperProportions.width/2)&&f-(s.helperProportions.width/2)<e&&q<o+(s.helperProportions.height/2)&&n-(s.helperProportions.height/2)<m);case"pointer":i=((s.positionAbs||s.position.absolute).left+(s.clickOffset||s.offset.click).left);j=((s.positionAbs||s.position.absolute).top+(s.clickOffset||s.offset.click).top);return b(j,q,k.proportions.height)&&b(i,h,k.proportions.width);case"touch":return((o>=q&&o<=m)||(n>=q&&n<=m)||(o<q&&n>m))&&((g>=h&&g<=e)||(f>=h&&f<=e)||(g<h&&f>e));default:return false}};c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(h,l){var g,f,e=c.ui.ddmanager.droppables[h.options.scope]||[],k=l?l.type:null,n=(h.currentItem||h.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(g=0;g<e.length;g++){if(e[g].options.disabled||(h&&!e[g].accept.call(e[g].element[0],(h.currentItem||h.element)))){continue}for(f=0;f<n.length;f++){if(n[f]===e[g].element[0]){e[g].proportions.height=0;continue droppablesLoop}}e[g].visible=e[g].element.css("display")!=="none";if(!e[g].visible){continue}if(k==="mousedown"){e[g]._activate.call(e[g],l)}e[g].offset=e[g].element.offset();e[g].proportions={width:e[g].element[0].offsetWidth,height:e[g].element[0].offsetHeight}}},drop:function(e,f){var g=false;c.each((c.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&c.ui.intersect(e,this,this.options.tolerance)){g=this._drop.call(this,f)||g}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(e.currentItem||e.element))){this.isout=true;this.isover=false;this._deactivate.call(this,f)}});return g},dragStart:function(e,f){e.element.parentsUntil("body").bind("scroll.droppable",function(){if(!e.options.refreshPositions){c.ui.ddmanager.prepareOffsets(e,f)}})},drag:function(e,f){if(e.options.refreshPositions){c.ui.ddmanager.prepareOffsets(e,f)}c.each(c.ui.ddmanager.droppables[e.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var j,h,g,i=c.ui.intersect(e,this,this.options.tolerance),k=!i&&this.isover?"isout":(i&&!this.isover?"isover":null);if(!k){return}if(this.options.greedy){h=this.options.scope;g=this.element.parents(":data(ui-droppable)").filter(function(){return c.data(this,"ui-droppable").options.scope===h});if(g.length){j=c.data(g[0],"ui-droppable");j.greedyChild=(k==="isover")}}if(j&&k==="isover"){j.isover=false;j.isout=true;j._out.call(j,f)}this[k]=true;this[k==="isout"?"isover":"isout"]=false;this[k==="isover"?"_over":"_out"].call(this,f);if(j&&k==="isout"){j.isout=false;j.isover=true;j._over.call(j,f)}})},dragStop:function(e,f){e.element.parentsUntil("body").unbind("scroll.droppable");if(!e.options.refreshPositions){c.ui.ddmanager.prepareOffsets(e,f)}}}})(jQuery)})(jQuery);